# Market queries

query GetMarkets(
  $first: Int = 20
  $skip: Int = 0
  $where: Market_filter
  $orderBy: Market_orderBy
) {
  markets(
    first: $first
    skip: $skip
    where: $where
    orderBy: $orderBy
  ) {
    id
    title
    description
    marketType
    
    # Parimutuel fields
    poolYes
    poolNo
    totalPool
    effectivePoolYes
    effectivePoolNo
    totalEffectivePool
    feeCollected
    
    # CPMM fields
    reserveYes
    reserveNo
    initialLiquidity
    totalFeesCollected
    spotPrice
    
    # Common fields
    resolved
    cancelled
    winningOutcome
    creator {
      id
      totalDeposited
      marketsCreated
    }
    feeBps
    creatorFeeShareBps
    cutoffTime
    resolveTime
    createdAt
    resolvedAt
  }
}

query GetMarket($id: ID!) {
  market(id: $id) {
    id
    title
    description
    marketType
    
    # Parimutuel fields
    poolYes
    poolNo
    totalPool
    effectivePoolYes
    effectivePoolNo
    totalEffectivePool
    feeCollected
    
    # CPMM fields
    reserveYes
    reserveNo
    initialLiquidity
    totalFeesCollected
    spotPrice
    
    # Common fields
    resolved
    cancelled
    winningOutcome
    creator {
      id
      totalDeposited
      marketsCreated
    }
    feeBps
    creatorFeeShareBps
    cutoffTime
    resolveTime
    createdAt
    resolvedAt
    
    deposits {
      id
      user {
        id
      }
      outcome
      amount
      effectiveAmount
      timeMultiplier
      timestamp
    }
    positions {
      id
      user {
        id
      }
      # Parimutuel position fields
      stakeYes
      stakeNo
      totalStake
      effectiveStakeYes
      effectiveStakeNo
      # CPMM position fields
      sharesYes
      sharesNo
      # Common position fields
      claimed
      payout
    }
  }
}

query GetActiveMarkets($first: Int = 20, $skip: Int = 0) {
  markets(
    first: $first
    skip: $skip
    where: { resolved: false, cancelled: false }
    orderBy: createdAt
    orderDirection: desc
  ) {
    id
    title
    description
    marketType
    # Parimutuel fields
    poolYes
    poolNo
    totalPool
    effectivePoolYes
    effectivePoolNo
    # CPMM fields
    reserveYes
    reserveNo
    spotPrice
    # Common fields
    cutoffTime
    resolveTime
    creator {
      id
    }
  }
}

query GetResolvedMarkets($first: Int = 20, $skip: Int = 0) {
  markets(
    first: $first
    skip: $skip
    where: { resolved: true }
    orderBy: resolvedAt
    orderDirection: desc
  ) {
    id
    title
    description
    marketType
    winningOutcome
    # Parimutuel fields
    poolYes
    poolNo
    totalPool
    # CPMM fields
    reserveYes
    reserveNo
    # Common fields
    resolvedAt
    creator {
      id
    }
  }
}