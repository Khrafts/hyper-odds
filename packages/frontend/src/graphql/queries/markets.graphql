# Market queries

query GetMarkets(
  $first: Int = 20
  $skip: Int = 0
  $where: Market_filter
  $orderBy: Market_orderBy
) {
  markets(
    first: $first
    skip: $skip
    where: $where
    orderBy: $orderBy
  ) {
    id
    title
    description
    poolYes
    poolNo
    resolved
    cancelled
    winningOutcome
    creator {
      id
      totalDeposited
      marketsCreated
    }
    feeBps
    creatorFeeShareBps
    cutoffTime
    resolveTime
    createdAt
    resolvedAt
    totalPool
    effectivePoolYes
    effectivePoolNo
  }
}

query GetMarket($id: ID!) {
  market(id: $id) {
    id
    title
    description
    poolYes
    poolNo
    resolved
    cancelled
    winningOutcome
    creator {
      id
      totalDeposited
      marketsCreated
    }
    feeBps
    creatorFeeShareBps
    cutoffTime
    resolveTime
    createdAt
    resolvedAt
    totalPool
    effectivePoolYes
    effectivePoolNo
    deposits {
      id
      user {
        id
      }
      outcome
      amount
      effectiveAmount
      timeMultiplier
      timestamp
    }
    positions {
      id
      user {
        id
      }
      stakeYes
      stakeNo
      totalStake
      effectiveStakeYes
      effectiveStakeNo
      claimed
      payout
    }
  }
}

query GetActiveMarkets($first: Int = 20, $skip: Int = 0) {
  markets(
    first: $first
    skip: $skip
    where: { resolved: false, cancelled: false }
    orderBy: createdAt
    orderDirection: desc
  ) {
    id
    title
    description
    poolYes
    poolNo
    cutoffTime
    resolveTime
    totalPool
    effectivePoolYes
    effectivePoolNo
    creator {
      id
    }
  }
}

query GetResolvedMarkets($first: Int = 20, $skip: Int = 0) {
  markets(
    first: $first
    skip: $skip
    where: { resolved: true }
    orderBy: resolvedAt
    orderDirection: desc
  ) {
    id
    title
    description
    winningOutcome
    poolYes
    poolNo
    resolvedAt
    totalPool
    creator {
      id
    }
  }
}